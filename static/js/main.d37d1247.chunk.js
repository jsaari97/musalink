(this["webpackJsonpmusalink-frontend"]=this["webpackJsonpmusalink-frontend"]||[]).push([[0],{103:function(e,t,n){e.exports=n(263)},263:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),l=n(92),o=n.n(l),c=n(54),i=n.n(c),u=n(93),s=n(11),f=n(1),h=function(e){var t=e.onChange,n=e.value,a=r.useCallback((function(e){var n=function(e){var t=e.match(/.+?(\?)/);return t?t[0].substr(0,t[0].length-1):e}(e.target.value);t(n)}),[t]),l=r.useCallback((function(e){e.target.select()}),[]);return r.createElement(f.d,{flex:1,mr:[0,3]},r.createElement(f.a,{as:"input",type:"text",sx:{flex:1,borderRadius:"3rem",outline:0,border:0,fontSize:2,pl:4,boxShadow:"0 0 4px rgba(0, 0, 0, 0.125)",minHeight:42},value:n,onChange:a,onFocus:l,placeholder:"Paste track, album or artist link"}))},m=n(95),p=n.n(m);function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function d(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var g=a.a.createElement("path",{d:"M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm0 2C4.477 20 0 15.523 0 10S4.477 0 10 0s10 4.477 10 10-4.477 10-10 10z"}),b=a.a.createElement("path",{d:"M5 12.111h1.82v1H5z"}),E=a.a.createElement("path",{d:"M5 11.421h1.82v1H5z"}),y=a.a.createElement("path",{d:"M5 10.731h1.82v1H5z"}),w=a.a.createElement("path",{d:"M5 10.041h1.82v1H5z"}),O=a.a.createElement("path",{d:"M5 9.351h1.82v1H5zM7.041 12.111h1.82v1h-1.82z"}),x=a.a.createElement("path",{d:"M7.041 11.421h1.82v1h-1.82z"}),j=a.a.createElement("path",{d:"M7.041 10.731h1.82v1h-1.82zM9.082 12.111h1.82v1h-1.82z"}),z=a.a.createElement("path",{d:"M9.082 11.421h1.82v1h-1.82z"}),M=a.a.createElement("path",{d:"M9.082 10.731h1.82v1h-1.82z"}),k=a.a.createElement("path",{d:"M9.082 10.041h1.82v1h-1.82z"}),R=a.a.createElement("path",{d:"M9.082 9.351h1.82v1h-1.82z"}),S=a.a.createElement("path",{d:"M9.082 8.66h1.82v1h-1.82z"}),C=a.a.createElement("path",{d:"M9.082 7.97h1.82v1h-1.82zM11.123 12.111h1.821v1h-1.821z"}),P=a.a.createElement("path",{d:"M11.123 11.421h1.821v1h-1.821z"}),A=a.a.createElement("path",{d:"M11.123 10.731h1.821v1h-1.821z"}),H=a.a.createElement("path",{d:"M11.123 10.041h1.821v1h-1.821z"}),I=a.a.createElement("path",{d:"M11.123 9.351h1.821v1h-1.821zM13.164 12.111h1.82v1h-1.82z"}),D=a.a.createElement("path",{d:"M13.164 11.421h1.82v1h-1.82z"}),L=a.a.createElement("path",{d:"M13.164 10.731h1.82v1h-1.82z"}),V=a.a.createElement("path",{d:"M13.164 10.041h1.82v1h-1.82z"}),B=a.a.createElement("path",{d:"M13.164 9.35h1.82v1h-1.82z"}),W=a.a.createElement("path",{d:"M13.164 8.66h1.82v1h-1.82z"}),N=a.a.createElement("path",{d:"M13.164 7.97h1.82v1h-1.82z"}),Y=a.a.createElement("path",{d:"M13.164 7.28h1.82v1h-1.82z"}),F=function(e){var t=e.svgRef,n=e.title,r=d(e,["svgRef","title"]);return a.a.createElement("svg",v({viewBox:"-2 -2 24 24",width:24,height:24,preserveAspectRatio:"xMinYMin",className:"jam jam-deezer-circle",ref:t},r),n?a.a.createElement("title",null,n):null,g,b,E,y,w,O,x,j,z,M,k,R,S,C,P,A,H,I,D,L,V,B,W,N,Y)},q=a.a.forwardRef((function(e,t){return a.a.createElement(F,v({svgRef:t},e))}));n.p;function J(){return(J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function $(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var _=a.a.createElement("path",{d:"M9.992 0C4.474 0 0 4.474 0 9.992c0 5.518 4.474 9.992 9.992 9.992 5.518 0 9.992-4.474 9.992-9.992C19.984 4.474 15.51 0 9.992 0zm4.348 15.683c-.127.329-.355.512-.59.512a.518.518 0 0 1-.344-.141c-1.796-1.588-3.87-1.843-5.294-1.778-1.578.073-2.735.544-2.747.549-.363.15-.74-.174-.839-.724-.1-.55.114-1.119.477-1.27.052-.022 1.297-.534 3.029-.62a8.939 8.939 0 0 1 2.917.32 8.09 8.09 0 0 1 3.146 1.737c.326.289.436.922.245 1.415zm1.27-3.063c-.15.329-.42.512-.699.512a.677.677 0 0 1-.407-.141c-2.127-1.588-4.584-1.843-6.271-1.778-1.87.073-3.24.544-3.253.549-.431.15-.876-.174-.995-.724-.118-.55.135-1.119.566-1.27.061-.022 1.536-.534 3.587-.62 1.208-.051 2.37.057 3.456.32 1.374.333 2.628.917 3.726 1.737.386.288.516.922.29 1.415zm.782-2.996a.958.958 0 0 1-.5-.142C10.835 6.404 4.276 8.234 4.21 8.252c-.528.153-1.075-.17-1.22-.721-.146-.551.165-1.12.693-1.272.076-.022 1.885-.534 4.4-.62a18.63 18.63 0 0 1 4.24.32c1.686.333 3.223.917 4.57 1.738.474.288.633.921.357 1.414a.985.985 0 0 1-.858.513z"}),G=function(e){var t=e.svgRef,n=e.title,r=$(e,["svgRef","title"]);return a.a.createElement("svg",J({viewBox:"-2 -2 24 24",width:24,height:24,preserveAspectRatio:"xMinYMin",className:"jam jam-spotify",ref:t},r),n?a.a.createElement("title",null,n):null,_)},K=a.a.forwardRef((function(e,t){return a.a.createElement(G,J({svgRef:t},e))})),Q=(n.p,{height:64,width:64,fill:"#333"}),T=function(e){var t=e.link,n=function(e){return e.match(/open\.spotify/)?"spotify":e.match(/deezer\.com/)?"deezer":null}(t),a=r.useMemo((function(){switch(n){case"deezer":return q;case"spotify":return K;default:return null}}),[n]);return a?r.createElement(f.g,{mx:2,href:t,title:"Listen on ".concat(n),target:"_blank",rel:"noreferrer noopener"},r.createElement(a,Q)):null};function U(){return(U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function X(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Z=a.a.createElement("path",{d:"M7.314 5.9l3.535-3.536A1 1 0 1 0 9.435.95L5.899 4.485 2.364.95A1 1 0 1 0 .95 2.364l3.535 3.535L.95 9.435a1 1 0 1 0 1.414 1.414l3.535-3.535 3.536 3.535a1 1 0 1 0 1.414-1.414L7.314 5.899z"}),ee=function(e){var t=e.svgRef,n=e.title,r=X(e,["svgRef","title"]);return a.a.createElement("svg",U({viewBox:"-6 -6 24 24",width:24,height:24,preserveAspectRatio:"xMinYMin",className:"jam jam-close",ref:t},r),n?a.a.createElement("title",null,n):null,Z)},te=a.a.forwardRef((function(e,t){return a.a.createElement(ee,U({svgRef:t},e))}));n.p;function ne(){return(ne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function re(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ae=a.a.createElement("path",{d:"M13.82 9.523a.976.976 0 0 0-.324-1.363L3.574 2.128a1.031 1.031 0 0 0-.535-.149c-.56 0-1.013.443-1.013.99V15.03c0 .185.053.366.153.523.296.464.92.606 1.395.317l9.922-6.031c.131-.08.243-.189.325-.317zm.746 1.997l-9.921 6.031c-1.425.867-3.3.44-4.186-.951A2.918 2.918 0 0 1 0 15.03V2.97C0 1.329 1.36 0 3.04 0c.567 0 1.123.155 1.605.448l9.921 6.032c1.425.866 1.862 2.696.975 4.088-.246.386-.58.712-.975.952z"}),le=function(e){var t=e.svgRef,n=e.title,r=re(e,["svgRef","title"]);return a.a.createElement("svg",ne({viewBox:"-4 -3 24 24",width:24,height:24,preserveAspectRatio:"xMinYMin",className:"jam jam-play",ref:t},r),n?a.a.createElement("title",null,n):null,ae)},oe=a.a.forwardRef((function(e,t){return a.a.createElement(le,ne({svgRef:t},e))}));n.p;function ce(){return(ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ie(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ue=a.a.createElement("path",{d:"M2 0h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zm0 2v14h2V2H2zm10-2h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zm0 2v14h2V2h-2z"}),se=function(e){var t=e.svgRef,n=e.title,r=ie(e,["svgRef","title"]);return a.a.createElement("svg",ce({viewBox:"-4 -3 24 24",width:24,height:24,preserveAspectRatio:"xMinYMin",className:"jam jam-pause",ref:t},r),n?a.a.createElement("title",null,n):null,ue)},fe=a.a.forwardRef((function(e,t){return a.a.createElement(se,ce({svgRef:t},e))})),he=(n.p,{control:{position:"absolute",top:0,right:0,bottom:0,left:0,margin:"auto",height:96,width:96,pointerEvents:"none","& > svg":{filter:"drop-shadow(0 2px 8px rgba(0, 0, 0, 0.25))"}}}),me=function(e){var t=e.image,n=e.preview,a=r.useRef(null),l=r.useState(!1),o=Object(s.a)(l,2),c=o[0],i=o[1],u=r.useMemo((function(){return c?fe:oe}),[c]);r.useEffect((function(){a.current&&a.current.addEventListener("ended",(function(){i(!1)}))}),[a]);var h=r.useCallback((function(){a&&a.current&&(c?(a.current.pause(),i(!1)):(a.current.play(),i(!0)))}),[c,a]);return r.createElement(f.b,{disabled:!n,onClick:h,variant:"clear",width:256,height:256,style:{position:"relative"},mb:[24,0]},!!n&&r.createElement(r.Fragment,null,r.createElement("audio",{ref:a,controls:!1,src:n}),r.createElement(f.a,{sx:he.control},r.createElement(u,{height:96,width:96,fill:"#fff"}))),r.createElement(f.f,{sx:{objectFit:"cover",borderRadius:"50%"},width:256,height:256,src:t}))},pe=function(e){var t=e.result,n=e.onClose;return r.createElement(f.c,{p:4,sx:{borderRadius:24,boxShadow:"small",position:"relative",zIndex:2,minHeight:320},mx:2,bg:"#fff"},r.createElement(te,{style:{position:"absolute",top:12,right:12},onClick:n,height:32,width:32,fill:"#444"}),t&&r.createElement(f.d,{flexDirection:["column","row"],alignItems:"center"},r.createElement(me,{image:t.cover,preview:t.preview}),r.createElement(f.d,{flex:1,justifyContent:"space-around",flexDirection:"column",alignItems:"center"},r.createElement(f.d,{flexDirection:"column",alignItems:"center"},"artist"!==t.type&&r.createElement(f.e,{m:"initial",mb:2,lineHeight:1,textAlign:"center",fontSize:5,as:"h1"},t.title||t.album),r.createElement(f.e,{textAlign:"center",fontSize:t.title||t.album?3:5,as:t.title||t.album?"h2":"h1",color:"#333"},t.artist),"track"===t.type&&r.createElement(f.e,{textAlign:"center",color:"#666",fontWeight:500,fontSize:2,as:"h3"},t.album)),r.createElement(f.a,{mt:4},t.urls.map((function(e){return r.createElement(T,{key:e,link:e})}))))))},ve=n(55),de=n(96),ge=n.n(de),be=n(35),Ee=n(97),ye=function(e){return!!e.match(/(open\.spotify|deezer\.com)/)},we=function(e,t){return"linear-gradient(348deg,rgb(".concat(e.join(","),") 0%,rgb(").concat(t.join(","),"))")},Oe=function(e){return p.a.get("".concat("https://europe-west1-jsaari-open-source.cloudfunctions.net/musalink?url=").concat(e))},xe=function(){var e=r.useState(function(){var e=ve.parse(window.location.search);return e&&e.q?e.q:""}()),t=Object(s.a)(e,2),n=t[0],a=t[1],l=r.useState(null),o=Object(s.a)(l,2),c=o[0],m=o[1],p=r.useState(ye(n)),v=Object(s.a)(p,2),d=v[0],g=v[1],b=r.useState(!1),E=Object(s.a)(b,2),y=E[0],w=E[1],O=r.useState("#aaa"),x=Object(s.a)(O,2),j=x[0],z=x[1],M=r.useState(we([84,46,113],[226,109,92])),k=Object(s.a)(M,2),R=k[0],S=k[1],C=Object(be.b)(c,null,{from:{position:"absolute",transform:"scale(0.9) translate3d(0, 150px, 0)",maxWidth:640,width:"100%"},enter:{opacity:1,transform:"scale(1) translate3d(0, 0px, 0)"},leave:{opacity:0,transform:"scale(0.9) translate3d(0, 150px, 0)"}}),P=r.useCallback(function(){var e=Object(u.a)(i.a.mark((function e(t){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,w(!0),e.next=5,Oe(n);case 5:r=e.sent,"string"!==typeof(a=r.data)&&m(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),w(!1);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),[n]);return r.useEffect((function(){g(ye(n));var e=ve.stringify({q:n}),t="".concat(window.location.protocol,"//").concat(window.location.host).concat(window.location.pathname,"?").concat(e);window.history.pushState({path:t},"",t)}),[n]),r.useEffect((function(){c&&(w(!1),window.document.title="".concat(c.artist).concat("artist"!==c.type?" - ".concat(c.title||c.album):""),ge.a.from(c.cover).getPalette().then((function(e){z(e.DarkMuted?e.DarkMuted.getHex():"#aaa"),S(we(e.Muted?e.Muted.getRgb():[226,109,92],e.LightVibrant?e.LightVibrant.getRgb():[84,46,113]))})))}),[c]),r.useEffect((function(){ye(n)&&Oe(n).then((function(e){var t=e.data;"string"!==typeof t&&m(t)}))}),[]),r.createElement(f.d,{width:1,flexDirection:"column",alignItems:"center",height:"100vh",py:[32,120,240],sx:{background:R}},r.createElement("div",{style:{maxWidth:640,width:"100%"}},C.map((function(e){var t=e.item,l=e.props,o=e.key;return t?r.createElement(be.a.div,{key:o,style:l},r.createElement(pe,{onClose:function(){return m(null)},result:c})):r.createElement(be.a.div,{key:o,style:l},r.createElement(f.d,{mt:[5,0],mx:[2,0],as:"form",onSubmit:P,flexDirection:["column","row"]},r.createElement(h,{value:n,onChange:a}),r.createElement(f.b,{disabled:!d||y,sx:{borderRadius:99},bg:d?j:"#aaa",color:d?"#fff":"#444",py:3,px:4,fontWeight:400,type:"submit",width:[1,128],m:"initial",mt:[2,0]},y?r.createElement(Ee.a,{size:18,singleColor:"#fff"}):"Submit")))}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var je=n(99),ze=n(102),Me=n(5);function ke(){var e=Object(ze.a)(["\n      body {\n        min-height: 100vh;\n        margin: 0;\n      }\n\n      html,\n      input {\n        font-family: ",";\n      }\n\n\n      pre {\n        font-family: ",";\n      }\n    "]);return ke=function(){return e},e}var Re={breakpoints:["40em","52em","64em"],fontSizes:[12,14,16,20,24,32,48,64],colors:{primary:"#542E71",orange:"#E26D5C",blue:"#07c",lightgray:"#f6f6ff"},space:[0,4,8,16,32,64,128,256],fonts:{heading:"Roboto, system-ui, sans-serif",sans:"Roboto, system-ui, sans-serif",mono:"Menlo, monospace"},shadows:{small:"0 2px 12px rgba(0, 0, 0, .125)",large:"0 0 24px rgba(0, 0, 0, .125)"},buttons:{clear:{bg:"transparent",m:0,p:0,outline:0,border:0}}},Se=function(){return r.createElement(Me.a,{styles:Object(Me.c)(ke(),Re.fonts.sans,Re.fonts.mono)})},Ce=function(){return a.a.createElement(je.a,{theme:Re},a.a.createElement(a.a.Fragment,null,a.a.createElement(xe,null),a.a.createElement(Se,null)))};o.a.render(a.a.createElement(Ce,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[103,1,2]]]);
//# sourceMappingURL=main.d37d1247.chunk.js.map