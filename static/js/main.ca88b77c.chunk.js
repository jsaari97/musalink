(this["webpackJsonpmusalink-frontend"]=this["webpackJsonpmusalink-frontend"]||[]).push([[0],{230:function(e,t,r){},231:function(e,t,r){"use strict";r.r(t);var n,a,l,c,i,o,s,u,h,f,m,d,p,b,v,j,x,w,y,g,O,E,M,z,k,N=r(1),S=r(84),P=r.n(S),C=r(13),I=r(19),R=r(85),H=r.n(R),B=r(234),V=r(233),A=r(2),L=function(e){var t=e.onChange,r=e.value,n=N.useCallback((function(e){var r=function(e){var t=e.match(/.+?(\?)/);return t?t[0].substr(0,t[0].length-1):e}(e.target.value);t(r)}),[t]),a=N.useCallback((function(e){e.target.select()}),[]);return Object(A.jsx)("div",{className:"flex flex-auto md:mr-3 mb-3 md:mb-0",children:Object(A.jsx)("input",{type:"text",className:"flex-auto outline-none rounded-full border border-gray-100 bg-white text-md shadow-md pl-4 md:pl-6 py-3 md:py-0",value:r,onChange:n,onFocus:a,placeholder:"Paste track, album or artist link"})})},Y=r(86),q=["title","titleId"];function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function T(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function F(e,t){var r=e.title,S=e.titleId,P=T(e,q);return N.createElement("svg",D({xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24",width:24,height:24,preserveAspectRatio:"xMinYMin",className:"jam jam-deezer-circle",ref:t,"aria-labelledby":S},P),r?N.createElement("title",{id:S},r):null,n||(n=N.createElement("path",{d:"M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm0 2C4.477 20 0 15.523 0 10S4.477 0 10 0s10 4.477 10 10-4.477 10-10 10z"})),a||(a=N.createElement("path",{d:"M5 12.111h1.82v1H5z"})),l||(l=N.createElement("path",{d:"M5 11.421h1.82v1H5z"})),c||(c=N.createElement("path",{d:"M5 10.731h1.82v1H5z"})),i||(i=N.createElement("path",{d:"M5 10.041h1.82v1H5z"})),o||(o=N.createElement("path",{d:"M5 9.351h1.82v1H5zM7.041 12.111h1.82v1h-1.82z"})),s||(s=N.createElement("path",{d:"M7.041 11.421h1.82v1h-1.82z"})),u||(u=N.createElement("path",{d:"M7.041 10.731h1.82v1h-1.82zM9.082 12.111h1.82v1h-1.82z"})),h||(h=N.createElement("path",{d:"M9.082 11.421h1.82v1h-1.82z"})),f||(f=N.createElement("path",{d:"M9.082 10.731h1.82v1h-1.82z"})),m||(m=N.createElement("path",{d:"M9.082 10.041h1.82v1h-1.82z"})),d||(d=N.createElement("path",{d:"M9.082 9.351h1.82v1h-1.82z"})),p||(p=N.createElement("path",{d:"M9.082 8.66h1.82v1h-1.82z"})),b||(b=N.createElement("path",{d:"M9.082 7.97h1.82v1h-1.82zM11.123 12.111h1.821v1h-1.821z"})),v||(v=N.createElement("path",{d:"M11.123 11.421h1.821v1h-1.821z"})),j||(j=N.createElement("path",{d:"M11.123 10.731h1.821v1h-1.821z"})),x||(x=N.createElement("path",{d:"M11.123 10.041h1.821v1h-1.821z"})),w||(w=N.createElement("path",{d:"M11.123 9.351h1.821v1h-1.821zM13.164 12.111h1.82v1h-1.82z"})),y||(y=N.createElement("path",{d:"M13.164 11.421h1.82v1h-1.82z"})),g||(g=N.createElement("path",{d:"M13.164 10.731h1.82v1h-1.82z"})),O||(O=N.createElement("path",{d:"M13.164 10.041h1.82v1h-1.82z"})),E||(E=N.createElement("path",{d:"M13.164 9.35h1.82v1h-1.82z"})),M||(M=N.createElement("path",{d:"M13.164 8.66h1.82v1h-1.82z"})),z||(z=N.createElement("path",{d:"M13.164 7.97h1.82v1h-1.82z"})),k||(k=N.createElement("path",{d:"M13.164 7.28h1.82v1h-1.82z"})))}var J,_=N.forwardRef(F),W=(r.p,["title","titleId"]);function X(){return(X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function $(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function G(e,t){var r=e.title,n=e.titleId,a=$(e,W);return N.createElement("svg",X({xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24",width:24,height:24,preserveAspectRatio:"xMinYMin",className:"jam jam-spotify",ref:t,"aria-labelledby":n},a),r?N.createElement("title",{id:n},r):null,J||(J=N.createElement("path",{d:"M9.992 0C4.474 0 0 4.474 0 9.992c0 5.518 4.474 9.992 9.992 9.992 5.518 0 9.992-4.474 9.992-9.992C19.984 4.474 15.51 0 9.992 0zm4.348 15.683c-.127.329-.355.512-.59.512a.518.518 0 0 1-.344-.141c-1.796-1.588-3.87-1.843-5.294-1.778-1.578.073-2.735.544-2.747.549-.363.15-.74-.174-.839-.724-.1-.55.114-1.119.477-1.27.052-.022 1.297-.534 3.029-.62a8.939 8.939 0 0 1 2.917.32 8.09 8.09 0 0 1 3.146 1.737c.326.289.436.922.245 1.415zm1.27-3.063c-.15.329-.42.512-.699.512a.677.677 0 0 1-.407-.141c-2.127-1.588-4.584-1.843-6.271-1.778-1.87.073-3.24.544-3.253.549-.431.15-.876-.174-.995-.724-.118-.55.135-1.119.566-1.27.061-.022 1.536-.534 3.587-.62 1.208-.051 2.37.057 3.456.32 1.374.333 2.628.917 3.726 1.737.386.288.516.922.29 1.415zm.782-2.996a.958.958 0 0 1-.5-.142C10.835 6.404 4.276 8.234 4.21 8.252c-.528.153-1.075-.17-1.22-.721-.146-.551.165-1.12.693-1.272.076-.022 1.885-.534 4.4-.62a18.63 18.63 0 0 1 4.24.32c1.686.333 3.223.917 4.57 1.738.474.288.633.921.357 1.414a.985.985 0 0 1-.858.513z"})))}var K,Q=N.forwardRef(G),U=(r.p,function(e){var t=e.link,r=Object(Y.determineService)(t),n=N.useMemo((function(){switch(r){case"deezer":return _;case"spotify":return Q;default:return null}}),[r]);return n?Object(A.jsx)("a",{className:"mx-2",href:t,title:"Listen on ".concat(r),target:"_blank",rel:"noreferrer noopener",children:Object(A.jsx)(V.a.div,{whileTap:{scale:.8},whileHover:{scale:1.125},children:Object(A.jsx)(n,{height:64,width:64,fill:"#444"})})}):null}),Z=["title","titleId"];function ee(){return(ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function te(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function re(e,t){var r=e.title,n=e.titleId,a=te(e,Z);return N.createElement("svg",ee({xmlns:"http://www.w3.org/2000/svg",viewBox:"-6 -6 24 24",width:24,height:24,preserveAspectRatio:"xMinYMin",className:"jam jam-close",ref:t,"aria-labelledby":n},a),r?N.createElement("title",{id:n},r):null,K||(K=N.createElement("path",{d:"M7.314 5.9l3.535-3.536A1 1 0 1 0 9.435.95L5.899 4.485 2.364.95A1 1 0 1 0 .95 2.364l3.535 3.535L.95 9.435a1 1 0 1 0 1.414 1.414l3.535-3.535 3.536 3.535a1 1 0 1 0 1.414-1.414L7.314 5.899z"})))}var ne,ae=N.forwardRef(re),le=(r.p,["title","titleId"]);function ce(){return(ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ie(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function oe(e,t){var r=e.title,n=e.titleId,a=ie(e,le);return N.createElement("svg",ce({xmlns:"http://www.w3.org/2000/svg",viewBox:"-4 -3 24 24",width:24,height:24,preserveAspectRatio:"xMinYMin",className:"jam jam-play",ref:t,"aria-labelledby":n},a),r?N.createElement("title",{id:n},r):null,ne||(ne=N.createElement("path",{d:"M13.82 9.523a.976.976 0 0 0-.324-1.363L3.574 2.128a1.031 1.031 0 0 0-.535-.149c-.56 0-1.013.443-1.013.99V15.03c0 .185.053.366.153.523.296.464.92.606 1.395.317l9.922-6.031c.131-.08.243-.189.325-.317zm.746 1.997l-9.921 6.031c-1.425.867-3.3.44-4.186-.951A2.918 2.918 0 0 1 0 15.03V2.97C0 1.329 1.36 0 3.04 0c.567 0 1.123.155 1.605.448l9.921 6.032c1.425.866 1.862 2.696.975 4.088-.246.386-.58.712-.975.952z"})))}var se,ue=N.forwardRef(oe),he=(r.p,["title","titleId"]);function fe(){return(fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function me(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function de(e,t){var r=e.title,n=e.titleId,a=me(e,he);return N.createElement("svg",fe({xmlns:"http://www.w3.org/2000/svg",viewBox:"-4 -3 24 24",width:24,height:24,preserveAspectRatio:"xMinYMin",className:"jam jam-pause",ref:t,"aria-labelledby":n},a),r?N.createElement("title",{id:n},r):null,se||(se=N.createElement("path",{d:"M2 0h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zm0 2v14h2V2H2zm10-2h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zm0 2v14h2V2h-2z"})))}var pe=N.forwardRef(de),be=(r.p,function(e){var t=e.image,r=e.preview,n=N.useRef(null),a=N.useState(!1),l=Object(C.a)(a,2),c=l[0],i=l[1],o=N.useMemo((function(){return c?pe:ue}),[c]);N.useEffect((function(){n.current&&(n.current.volume=.4,n.current.addEventListener("ended",(function(){i(!1)})))}),[n]);var s=N.useCallback((function(){n&&n.current&&(c?(n.current.pause(),i(!1)):(n.current.play(),i(!0)))}),[c,n]);return Object(A.jsxs)(V.a.button,{disabled:!r,onClick:s,className:"w-64 h-64 flex-shrink-0 relative focus:outline-none mb-6 md:mb-0",whileTap:{scale:.85},whileHover:{scale:1.025},children:[!!r&&Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("audio",{ref:n,controls:!1,src:r}),Object(A.jsx)("div",{className:"pointer-events-none absolute m-auto inset-0 w-24 h-24",children:Object(A.jsx)(o,{className:"w-24 h-24",fill:"#fff",style:{filter:"drop-shadow(0 2px 8px rgba(0, 0, 0, 0.25))"}})})]}),Object(A.jsx)("img",{className:"w-full h-full rounded-full object-cover",alt:"Album cover",src:t})]})}),ve=function(e){var t=e.result,r=e.onClose;return Object(A.jsxs)("div",{className:"relative p-8 shadow-lg border border-gray-200 rounded-lg z-10 bg-white mx-4 md:mx-0",children:[Object(A.jsx)("button",{onClick:r,className:"absolute top-3 right-3",title:"Close",children:Object(A.jsx)(ae,{height:32,width:32,fill:"#444"})}),t&&Object(A.jsxs)("div",{className:"flex flex-col md:flex-row items-center",children:[Object(A.jsx)(be,{image:t.cover,preview:t.preview}),Object(A.jsxs)("div",{className:"flex flex-col flex-auto justify-around items-center",children:[Object(A.jsxs)("div",{className:"flex flex-col items-center mb-6",children:["artist"!==t.type&&Object(A.jsx)("h1",{className:"text-3xl font-bold text-center mb-2",children:t.title||t.album}),Object(A.jsx)("h2",{className:"text-xl font-semibold text-center mb-1 text-gray-700",children:t.artist}),"track"===t.type&&Object(A.jsx)("h3",{className:"text-lg font-medium text-center text-gray-500",children:t.album})]}),Object(A.jsx)("div",{className:"flex",children:t.urls.map((function(e){return Object(A.jsx)(U,{link:e},e)}))})]})]})]})},je=r(54),xe=r.n(je),we=r(87),ye=function(){var e=Object(we.a)(xe.a.mark((function e(t){var r,n,a;return xe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=I.stringify({url:t}),e.next=4,fetch("".concat("https://europe-west1-jsaari-open-source.cloudfunctions.net/musalink","?").concat(r));case 4:if(200===(n=e.sent).status){e.next=7;break}return e.abrupt("return",Promise.reject());case 7:return e.next=9,n.json();case 9:return a=e.sent,e.abrupt("return",Promise.resolve(a));case 13:return e.prev=13,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),ge=function(e){var t=e.color,r=void 0===t?"#aaa":t,n=e.size,a=void 0===n?24:n;return Object(A.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"40px",height:"40px",viewBox:"0 0 50 50",enableBackground:"new 0 0 50 50",xmlSpace:"preserve",style:{height:a,width:a},children:Object(A.jsx)("path",{fill:r,d:"M43.935,25.145c0-10.318-8.364-18.683-18.683-18.683c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615c8.072,0,14.615,6.543,14.615,14.615H43.935z",children:Object(A.jsx)("animateTransform",{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 25 25",to:"360 25 25",dur:"0.6s",repeatCount:"indefinite"})})})},Oe=function(e){return!!e.match(/(open\.spotify|deezer\.com)/)},Ee=function(e,t){return"linear-gradient(348deg,rgb(".concat(e.join(","),") 0%,rgb(").concat(t.join(","),"))")},Me=function(){var e=N.useMemo((function(){return(new Date).getFullYear()}),[]);return Object(A.jsx)("footer",{className:"absolute bottom-3 left-1/2 transform -translate-x-1/2",children:Object(A.jsxs)("p",{className:"text-sm text-gray-100",style:{textShadow:"0 2px 4px rgba(0,0,0,0.25)"},children:[e," - Made by Jim Saari"]})})},ze=function(){var e=N.useState(function(){var e=I.parse(window.location.search);return e.q&&"string"===typeof e.q?e.q:""}()),t=Object(C.a)(e,2),r=t[0],n=t[1],a=N.useState(null),l=Object(C.a)(a,2),c=l[0],i=l[1],o=N.useState(Oe(r)),s=Object(C.a)(o,2),u=s[0],h=s[1],f=N.useState(!1),m=Object(C.a)(f,2),d=m[0],p=m[1],b=N.useState("#5d13d4"),v=Object(C.a)(b,2),j=v[0],x=v[1],w=N.useState(Ee([240,240,240],[250,250,250])),y=Object(C.a)(w,2),g=y[0],O=y[1],E=N.useCallback((function(e){e.preventDefault(),p(!0),ye(r).then(i).catch((function(){})).finally((function(){p(!1)}))}),[r]);N.useEffect((function(){h(Oe(r));var e=I.stringify({q:r}),t="".concat(window.location.protocol,"//").concat(window.location.host).concat(window.location.pathname).concat(r?"?".concat(e):"");window.history.pushState({path:t},"",t)}),[r]),N.useEffect((function(){c&&(p(!1),window.document.title="".concat(c.artist).concat("artist"!==c.type?" - ".concat(c.title||c.album):""),H.a.from(c.cover).getPalette().then((function(e){e.DarkVibrant&&x(e.DarkVibrant.getHex()),O(Ee(e.Muted?e.Muted.getRgb():[226,109,92],e.LightVibrant?e.LightVibrant.getRgb():[84,46,113]))})))}),[c]),N.useEffect((function(){Oe(r)&&(p(!0),ye(r).then(i).catch((function(){})).finally((function(){p(!1)})))}),[]);var M=N.useCallback((function(){i(null)}),[]);return Object(A.jsxs)("main",{className:"w-full flex flex-col items-center py-12 md:py-32 lg:py-64 min-h-screen",children:[Object(A.jsx)(B.a,{initial:!1,children:Object(A.jsx)(V.a.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute w-full h-full top-0 left-0",style:{background:g}},g)}),Object(A.jsx)("div",{className:"max-w-2xl w-full z-20",children:Object(A.jsx)(B.a,{initial:!1,exitBeforeEnter:!0,children:c?Object(A.jsx)(V.a.div,{initial:{opacity:0,y:125},animate:{opacity:1,y:0},exit:{opacity:0},children:Object(A.jsx)(ve,{onClose:M,result:c})},"card"):Object(A.jsx)(V.a.div,{initial:{opacity:0,y:125},animate:{opacity:1,y:0},exit:{opacity:0},children:Object(A.jsxs)("form",{className:"mt-12 md:mt-0 mx-6 md:mx-0 h-auto md:h-12 flex flex-col md:flex-row",onSubmit:E,children:[Object(A.jsx)(L,{value:r,onChange:n}),Object(A.jsx)("button",{disabled:!u||d,className:"shadow-md flex items-center justify-center rounded-full text-white py-6 md:py-4 px-4 h-8 md:h-auto w-full md:w-32 mt-2 md:mt-0",style:{textShadow:"0 0 2px rgba(0,0,0,0.25)",backgroundColor:j},type:"submit",children:d?Object(A.jsx)(ge,{color:"#fff"}):"Search"})]})},"form")})}),Object(A.jsx)(Me,{})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r(230);P.a.render(Object(A.jsx)(ze,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},86:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.determineService=void 0;t.determineService=function(e){return e.match(/open\.spotify/)?"spotify":e.match(/deezer\.com/)?"deezer":null}}},[[231,1,2]]]);
//# sourceMappingURL=main.ca88b77c.chunk.js.map