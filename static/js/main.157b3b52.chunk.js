(this["webpackJsonpmusalink-frontend"]=this["webpackJsonpmusalink-frontend"]||[]).push([[0],{215:function(e,t,r){},216:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r(0),l=r(71),c=r.n(l),i=r(5),o=r(9),s=r(72),u=r.n(s),h=r(4),f=function(e){var t=e.onChange,r=e.value,l=a.useCallback((function(e){var r=function(e){var t=e.match(/.+?(\?)/);return t?t[0].substr(0,t[0].length-1):e}(e.target.value);t(r)}),[t]),c=a.useCallback((function(e){e.target.select()}),[]);return Object(n.jsx)("div",{className:"flex flex-auto md:mr-3 mb-3 md:mb-0",children:Object(n.jsx)("input",{type:"text",className:"flex-auto outline-none rounded-full border border-gray-100 bg-white text-md shadow-md pl-4 md:pl-6 py-3 md:py-0",value:r,onChange:l,onFocus:c,placeholder:"Paste track, album or artist link"})})},m=r(73);function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function p(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var b=a.createElement("path",{d:"M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm0 2C4.477 20 0 15.523 0 10S4.477 0 10 0s10 4.477 10 10-4.477 10-10 10z"}),v=a.createElement("path",{d:"M5 12.111h1.82v1H5z"}),j=a.createElement("path",{d:"M5 11.421h1.82v1H5z"}),x=a.createElement("path",{d:"M5 10.731h1.82v1H5z"}),w=a.createElement("path",{d:"M5 10.041h1.82v1H5z"}),y=a.createElement("path",{d:"M5 9.351h1.82v1H5zM7.041 12.111h1.82v1h-1.82z"}),O=a.createElement("path",{d:"M7.041 11.421h1.82v1h-1.82z"}),g=a.createElement("path",{d:"M7.041 10.731h1.82v1h-1.82zM9.082 12.111h1.82v1h-1.82z"}),E=a.createElement("path",{d:"M9.082 11.421h1.82v1h-1.82z"}),z=a.createElement("path",{d:"M9.082 10.731h1.82v1h-1.82z"}),M=a.createElement("path",{d:"M9.082 10.041h1.82v1h-1.82z"}),k=a.createElement("path",{d:"M9.082 9.351h1.82v1h-1.82z"}),N=a.createElement("path",{d:"M9.082 8.66h1.82v1h-1.82z"}),S=a.createElement("path",{d:"M9.082 7.97h1.82v1h-1.82zM11.123 12.111h1.821v1h-1.821z"}),P=a.createElement("path",{d:"M11.123 11.421h1.821v1h-1.821z"}),C=a.createElement("path",{d:"M11.123 10.731h1.821v1h-1.821z"}),I=a.createElement("path",{d:"M11.123 10.041h1.821v1h-1.821z"}),R=a.createElement("path",{d:"M11.123 9.351h1.821v1h-1.821zM13.164 12.111h1.82v1h-1.82z"}),H=a.createElement("path",{d:"M13.164 11.421h1.82v1h-1.82z"}),B=a.createElement("path",{d:"M13.164 10.731h1.82v1h-1.82z"}),V=a.createElement("path",{d:"M13.164 10.041h1.82v1h-1.82z"}),A=a.createElement("path",{d:"M13.164 9.35h1.82v1h-1.82z"}),L=a.createElement("path",{d:"M13.164 8.66h1.82v1h-1.82z"}),Y=a.createElement("path",{d:"M13.164 7.97h1.82v1h-1.82z"}),q=a.createElement("path",{d:"M13.164 7.28h1.82v1h-1.82z"});function T(e,t){var r=e.title,n=e.titleId,l=p(e,["title","titleId"]);return a.createElement("svg",d({xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24",width:24,height:24,preserveAspectRatio:"xMinYMin",className:"jam jam-deezer-circle",ref:t,"aria-labelledby":n},l),r?a.createElement("title",{id:n},r):null,b,v,j,x,w,y,O,g,E,z,M,k,N,S,P,C,I,R,H,B,V,A,L,Y,q)}var D=a.forwardRef(T);r.p;function J(){return(J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function _(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var F=a.createElement("path",{d:"M9.992 0C4.474 0 0 4.474 0 9.992c0 5.518 4.474 9.992 9.992 9.992 5.518 0 9.992-4.474 9.992-9.992C19.984 4.474 15.51 0 9.992 0zm4.348 15.683c-.127.329-.355.512-.59.512a.518.518 0 0 1-.344-.141c-1.796-1.588-3.87-1.843-5.294-1.778-1.578.073-2.735.544-2.747.549-.363.15-.74-.174-.839-.724-.1-.55.114-1.119.477-1.27.052-.022 1.297-.534 3.029-.62a8.939 8.939 0 0 1 2.917.32 8.09 8.09 0 0 1 3.146 1.737c.326.289.436.922.245 1.415zm1.27-3.063c-.15.329-.42.512-.699.512a.677.677 0 0 1-.407-.141c-2.127-1.588-4.584-1.843-6.271-1.778-1.87.073-3.24.544-3.253.549-.431.15-.876-.174-.995-.724-.118-.55.135-1.119.566-1.27.061-.022 1.536-.534 3.587-.62 1.208-.051 2.37.057 3.456.32 1.374.333 2.628.917 3.726 1.737.386.288.516.922.29 1.415zm.782-2.996a.958.958 0 0 1-.5-.142C10.835 6.404 4.276 8.234 4.21 8.252c-.528.153-1.075-.17-1.22-.721-.146-.551.165-1.12.693-1.272.076-.022 1.885-.534 4.4-.62a18.63 18.63 0 0 1 4.24.32c1.686.333 3.223.917 4.57 1.738.474.288.633.921.357 1.414a.985.985 0 0 1-.858.513z"});function W(e,t){var r=e.title,n=e.titleId,l=_(e,["title","titleId"]);return a.createElement("svg",J({xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24",width:24,height:24,preserveAspectRatio:"xMinYMin",className:"jam jam-spotify",ref:t,"aria-labelledby":n},l),r?a.createElement("title",{id:n},r):null,F)}var X=a.forwardRef(W),$=(r.p,function(e){var t=e.link,r=Object(m.determineService)(t),l=a.useMemo((function(){switch(r){case"deezer":return D;case"spotify":return X;default:return null}}),[r]);return l?Object(n.jsx)("a",{className:"mx-2",href:t,title:"Listen on ".concat(r),target:"_blank",rel:"noreferrer noopener",children:Object(n.jsx)(h.b.div,{whileTap:{scale:.8},whileHover:{scale:1.125},children:Object(n.jsx)(l,{height:64,width:64,fill:"#444"})})}):null});function G(){return(G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function K(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var Q=a.createElement("path",{d:"M7.314 5.9l3.535-3.536A1 1 0 1 0 9.435.95L5.899 4.485 2.364.95A1 1 0 1 0 .95 2.364l3.535 3.535L.95 9.435a1 1 0 1 0 1.414 1.414l3.535-3.535 3.536 3.535a1 1 0 1 0 1.414-1.414L7.314 5.899z"});function U(e,t){var r=e.title,n=e.titleId,l=K(e,["title","titleId"]);return a.createElement("svg",G({xmlns:"http://www.w3.org/2000/svg",viewBox:"-6 -6 24 24",width:24,height:24,preserveAspectRatio:"xMinYMin",className:"jam jam-close",ref:t,"aria-labelledby":n},l),r?a.createElement("title",{id:n},r):null,Q)}var Z=a.forwardRef(U);r.p;function ee(){return(ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function te(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var re=a.createElement("path",{d:"M13.82 9.523a.976.976 0 0 0-.324-1.363L3.574 2.128a1.031 1.031 0 0 0-.535-.149c-.56 0-1.013.443-1.013.99V15.03c0 .185.053.366.153.523.296.464.92.606 1.395.317l9.922-6.031c.131-.08.243-.189.325-.317zm.746 1.997l-9.921 6.031c-1.425.867-3.3.44-4.186-.951A2.918 2.918 0 0 1 0 15.03V2.97C0 1.329 1.36 0 3.04 0c.567 0 1.123.155 1.605.448l9.921 6.032c1.425.866 1.862 2.696.975 4.088-.246.386-.58.712-.975.952z"});function ne(e,t){var r=e.title,n=e.titleId,l=te(e,["title","titleId"]);return a.createElement("svg",ee({xmlns:"http://www.w3.org/2000/svg",viewBox:"-4 -3 24 24",width:24,height:24,preserveAspectRatio:"xMinYMin",className:"jam jam-play",ref:t,"aria-labelledby":n},l),r?a.createElement("title",{id:n},r):null,re)}var ae=a.forwardRef(ne);r.p;function le(){return(le=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ce(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var ie=a.createElement("path",{d:"M2 0h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zm0 2v14h2V2H2zm10-2h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zm0 2v14h2V2h-2z"});function oe(e,t){var r=e.title,n=e.titleId,l=ce(e,["title","titleId"]);return a.createElement("svg",le({xmlns:"http://www.w3.org/2000/svg",viewBox:"-4 -3 24 24",width:24,height:24,preserveAspectRatio:"xMinYMin",className:"jam jam-pause",ref:t,"aria-labelledby":n},l),r?a.createElement("title",{id:n},r):null,ie)}var se=a.forwardRef(oe),ue=(r.p,function(e){var t=e.image,r=e.preview,l=a.useRef(null),c=a.useState(!1),o=Object(i.a)(c,2),s=o[0],u=o[1],f=a.useMemo((function(){return s?se:ae}),[s]);a.useEffect((function(){l.current&&(l.current.volume=.4,l.current.addEventListener("ended",(function(){u(!1)})))}),[l]);var m=a.useCallback((function(){l&&l.current&&(s?(l.current.pause(),u(!1)):(l.current.play(),u(!0)))}),[s,l]);return Object(n.jsxs)(h.b.button,{disabled:!r,onClick:m,className:"w-64 h-64 flex-shrink-0 relative focus:outline-none mb-6 md:mb-0",whileTap:{scale:.85},whileHover:{scale:1.025},children:[!!r&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("audio",{ref:l,controls:!1,src:r}),Object(n.jsx)("div",{className:"pointer-events-none absolute m-auto inset-0 w-24 h-24",children:Object(n.jsx)(f,{className:"w-24 h-24",fill:"#fff",style:{filter:"drop-shadow(0 2px 8px rgba(0, 0, 0, 0.25))"}})})]}),Object(n.jsx)("img",{className:"w-full h-full rounded-full object-cover",alt:"Album cover",src:t})]})}),he=function(e){var t=e.result,r=e.onClose;return Object(n.jsxs)("div",{className:"relative p-8 shadow-lg border border-gray-200 rounded-lg z-10 bg-white mx-4 md:mx-0",children:[Object(n.jsx)("button",{onClick:r,className:"absolute top-3 right-3",title:"Close",children:Object(n.jsx)(Z,{height:32,width:32,fill:"#444"})}),t&&Object(n.jsxs)("div",{className:"flex flex-col md:flex-row items-center",children:[Object(n.jsx)(ue,{image:t.cover,preview:t.preview}),Object(n.jsxs)("div",{className:"flex flex-col flex-auto justify-around items-center",children:[Object(n.jsxs)("div",{className:"flex flex-col items-center mb-6",children:["artist"!==t.type&&Object(n.jsx)("h1",{className:"text-3xl font-bold text-center mb-2",children:t.title||t.album}),Object(n.jsx)("h2",{className:"text-xl font-semibold text-center mb-1 text-gray-700",children:t.artist}),"track"===t.type&&Object(n.jsx)("h3",{className:"text-lg font-medium text-center text-gray-500",children:t.album})]}),Object(n.jsx)("div",{className:"flex",children:t.urls.map((function(e){return Object(n.jsx)($,{link:e},e)}))})]})]})]})},fe=r(42),me=r.n(fe),de=r(74),pe=function(){var e=Object(de.a)(me.a.mark((function e(t){var r,n,a;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=o.stringify({url:t}),e.next=4,fetch("".concat("https://europe-west1-jsaari-open-source.cloudfunctions.net/musalink","?").concat(r));case 4:if(200===(n=e.sent).status){e.next=7;break}return e.abrupt("return",Promise.reject());case 7:return e.next=9,n.json();case 9:return a=e.sent,e.abrupt("return",Promise.resolve(a));case 13:return e.prev=13,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),be=function(e){var t=e.color,r=void 0===t?"#aaa":t,a=e.size,l=void 0===a?24:a;return Object(n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"40px",height:"40px",viewBox:"0 0 50 50",enableBackground:"new 0 0 50 50",xmlSpace:"preserve",style:{height:l,width:l},children:Object(n.jsx)("path",{fill:r,d:"M43.935,25.145c0-10.318-8.364-18.683-18.683-18.683c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615c8.072,0,14.615,6.543,14.615,14.615H43.935z",children:Object(n.jsx)("animateTransform",{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 25 25",to:"360 25 25",dur:"0.6s",repeatCount:"indefinite"})})})},ve=function(e){return!!e.match(/(open\.spotify|deezer\.com)/)},je=function(e,t){return"linear-gradient(348deg,rgb(".concat(e.join(","),") 0%,rgb(").concat(t.join(","),"))")},xe=function(){return Object(n.jsx)("footer",{className:"absolute bottom-3 left-1/2 transform -translate-x-1/2",children:Object(n.jsx)("p",{className:"text-sm text-gray-100",style:{textShadow:"0 2px 4px rgba(0,0,0,0.25)"},children:"2020 - Made by Jim Saari"})})},we=function(){var e=a.useState(function(){var e=o.parse(window.location.search);return e.q&&"string"===typeof e.q?e.q:""}()),t=Object(i.a)(e,2),r=t[0],l=t[1],c=a.useState(null),s=Object(i.a)(c,2),m=s[0],d=s[1],p=a.useState(ve(r)),b=Object(i.a)(p,2),v=b[0],j=b[1],x=a.useState(!1),w=Object(i.a)(x,2),y=w[0],O=w[1],g=a.useState("#5d13d4"),E=Object(i.a)(g,2),z=E[0],M=E[1],k=a.useState(je([240,240,240],[250,250,250])),N=Object(i.a)(k,2),S=N[0],P=N[1],C=a.useCallback((function(e){e.preventDefault(),O(!0),pe(r).then(d).catch((function(){})).finally((function(){O(!1)}))}),[r]);a.useEffect((function(){j(ve(r));var e=o.stringify({q:r}),t="".concat(window.location.protocol,"//").concat(window.location.host).concat(window.location.pathname).concat(r?"?".concat(e):"");window.history.pushState({path:t},"",t)}),[r]),a.useEffect((function(){m&&(O(!1),window.document.title="".concat(m.artist).concat("artist"!==m.type?" - ".concat(m.title||m.album):""),u.a.from(m.cover).getPalette().then((function(e){e.DarkVibrant&&M(e.DarkVibrant.getHex()),P(je(e.Muted?e.Muted.getRgb():[226,109,92],e.LightVibrant?e.LightVibrant.getRgb():[84,46,113]))})))}),[m]),a.useEffect((function(){ve(r)&&(O(!0),pe(r).then(d).catch((function(){})).finally((function(){O(!1)})))}),[]);var I=a.useCallback((function(){d(null)}),[]);return Object(n.jsxs)("main",{className:"w-full flex flex-col items-center py-12 md:py-32 lg:py-64 min-h-screen",children:[Object(n.jsx)(h.a,{initial:!1,children:Object(n.jsx)(h.b.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute w-full h-full top-0 left-0",style:{background:S}},S)}),Object(n.jsx)("div",{className:"max-w-2xl w-full z-20",children:Object(n.jsx)(h.a,{initial:!1,exitBeforeEnter:!0,children:m?Object(n.jsx)(h.b.div,{initial:{opacity:0,y:125},animate:{opacity:1,y:0},exit:{opacity:0},children:Object(n.jsx)(he,{onClose:I,result:m})},"card"):Object(n.jsx)(h.b.div,{initial:{opacity:0,y:125},animate:{opacity:1,y:0},exit:{opacity:0},children:Object(n.jsxs)("form",{className:"mt-12 md:mt-0 mx-6 md:mx-0 h-auto md:h-12 flex flex-col md:flex-row",onSubmit:C,children:[Object(n.jsx)(f,{value:r,onChange:l}),Object(n.jsx)("button",{disabled:!v||y,className:"shadow-md flex items-center justify-center rounded-full text-white py-6 md:py-4 px-4 h-8 md:h-auto w-full md:w-32 mt-2 md:mt-0",style:{textShadow:"0 0 2px rgba(0,0,0,0.25)",backgroundColor:z},type:"submit",children:y?Object(n.jsx)(be,{color:"#fff"}):"Search"})]})},"form")})}),Object(n.jsx)(xe,{})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r(215);c.a.render(Object(n.jsx)(we,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},73:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.determineService=void 0,t.determineService=function(e){return e.match(/open\.spotify/)?"spotify":e.match(/deezer\.com/)?"deezer":null}}},[[216,1,2]]]);
//# sourceMappingURL=main.157b3b52.chunk.js.map