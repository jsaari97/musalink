(this["webpackJsonpmusalink-frontend"]=this["webpackJsonpmusalink-frontend"]||[]).push([[0],{234:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(0),i=n(82),c=n.n(i),o=n(12),l=n(2),s=n(17),h=function(e){var t=e.onChange,n=e.value,i=a.useCallback((function(e){var n=function(e){var t=e.match(/.+?(\?)/);return t?t[0].substr(0,t[0].length-1):e}(e.target.value);t(n)}),[t]),c=a.useCallback((function(e){e.target.select()}),[]);return Object(r.jsx)(l.d,{flex:1,mr:[0,3],mb:[3,0],children:Object(r.jsx)(l.a,{as:"input",type:"text",sx:{flex:1,borderRadius:"3rem",outline:0,border:"1px solid #f1f1f1",fontSize:2,pl:[3,4],boxShadow:"small",minHeight:48},value:n,onChange:i,onFocus:c,placeholder:"Paste track, album or artist link"})})},u=n(84);function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var d=a.createElement("path",{d:"M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm0 2C4.477 20 0 15.523 0 10S4.477 0 10 0s10 4.477 10 10-4.477 10-10 10z"}),b=a.createElement("path",{d:"M5 12.111h1.82v1H5z"}),m=a.createElement("path",{d:"M5 11.421h1.82v1H5z"}),j=a.createElement("path",{d:"M5 10.731h1.82v1H5z"}),v=a.createElement("path",{d:"M5 10.041h1.82v1H5z"}),x=a.createElement("path",{d:"M5 9.351h1.82v1H5zM7.041 12.111h1.82v1h-1.82z"}),g=a.createElement("path",{d:"M7.041 11.421h1.82v1h-1.82z"}),O=a.createElement("path",{d:"M7.041 10.731h1.82v1h-1.82zM9.082 12.111h1.82v1h-1.82z"}),y=a.createElement("path",{d:"M9.082 11.421h1.82v1h-1.82z"}),w=a.createElement("path",{d:"M9.082 10.731h1.82v1h-1.82z"}),z=a.createElement("path",{d:"M9.082 10.041h1.82v1h-1.82z"}),E=a.createElement("path",{d:"M9.082 9.351h1.82v1h-1.82z"}),M=a.createElement("path",{d:"M9.082 8.66h1.82v1h-1.82z"}),S=a.createElement("path",{d:"M9.082 7.97h1.82v1h-1.82zM11.123 12.111h1.821v1h-1.821z"}),k=a.createElement("path",{d:"M11.123 11.421h1.821v1h-1.821z"}),I=a.createElement("path",{d:"M11.123 10.731h1.821v1h-1.821z"}),C=a.createElement("path",{d:"M11.123 10.041h1.821v1h-1.821z"}),P=a.createElement("path",{d:"M11.123 9.351h1.821v1h-1.821zM13.164 12.111h1.82v1h-1.82z"}),R=a.createElement("path",{d:"M13.164 11.421h1.82v1h-1.82z"}),H=a.createElement("path",{d:"M13.164 10.731h1.82v1h-1.82z"}),A=a.createElement("path",{d:"M13.164 10.041h1.82v1h-1.82z"}),B=a.createElement("path",{d:"M13.164 9.35h1.82v1h-1.82z"}),V=a.createElement("path",{d:"M13.164 8.66h1.82v1h-1.82z"}),D=a.createElement("path",{d:"M13.164 7.97h1.82v1h-1.82z"}),L=a.createElement("path",{d:"M13.164 7.28h1.82v1h-1.82z"});function N(e,t){var n=e.title,r=e.titleId,i=p(e,["title","titleId"]);return a.createElement("svg",f({viewBox:"-2 -2 24 24",width:24,height:24,preserveAspectRatio:"xMinYMin",className:"jam jam-deezer-circle",ref:t,"aria-labelledby":r},i),n?a.createElement("title",{id:r},n):null,d,b,m,j,v,x,g,O,y,w,z,E,M,S,k,I,C,P,R,H,A,B,V,D,L)}var W=a.forwardRef(N);n.p;function Y(){return(Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function q(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var F=a.createElement("path",{d:"M9.992 0C4.474 0 0 4.474 0 9.992c0 5.518 4.474 9.992 9.992 9.992 5.518 0 9.992-4.474 9.992-9.992C19.984 4.474 15.51 0 9.992 0zm4.348 15.683c-.127.329-.355.512-.59.512a.518.518 0 0 1-.344-.141c-1.796-1.588-3.87-1.843-5.294-1.778-1.578.073-2.735.544-2.747.549-.363.15-.74-.174-.839-.724-.1-.55.114-1.119.477-1.27.052-.022 1.297-.534 3.029-.62a8.939 8.939 0 0 1 2.917.32 8.09 8.09 0 0 1 3.146 1.737c.326.289.436.922.245 1.415zm1.27-3.063c-.15.329-.42.512-.699.512a.677.677 0 0 1-.407-.141c-2.127-1.588-4.584-1.843-6.271-1.778-1.87.073-3.24.544-3.253.549-.431.15-.876-.174-.995-.724-.118-.55.135-1.119.566-1.27.061-.022 1.536-.534 3.587-.62 1.208-.051 2.37.057 3.456.32 1.374.333 2.628.917 3.726 1.737.386.288.516.922.29 1.415zm.782-2.996a.958.958 0 0 1-.5-.142C10.835 6.404 4.276 8.234 4.21 8.252c-.528.153-1.075-.17-1.22-.721-.146-.551.165-1.12.693-1.272.076-.022 1.885-.534 4.4-.62a18.63 18.63 0 0 1 4.24.32c1.686.333 3.223.917 4.57 1.738.474.288.633.921.357 1.414a.985.985 0 0 1-.858.513z"});function T(e,t){var n=e.title,r=e.titleId,i=q(e,["title","titleId"]);return a.createElement("svg",Y({viewBox:"-2 -2 24 24",width:24,height:24,preserveAspectRatio:"xMinYMin",className:"jam jam-spotify",ref:t,"aria-labelledby":r},i),n?a.createElement("title",{id:r},n):null,F)}var J=a.forwardRef(T),_=(n.p,n(8)),X=function(e){var t=e.link,n=Object(u.determineService)(t),i=a.useMemo((function(){switch(n){case"deezer":return W;case"spotify":return J;default:return null}}),[n]);return i?Object(r.jsx)(l.g,{mx:2,href:t,title:"Listen on ".concat(n),target:"_blank",rel:"noreferrer noopener",children:Object(r.jsx)(_.b.div,{whileTap:{scale:.8},whileHover:{scale:1.125},children:Object(r.jsx)(i,{height:64,width:64,fill:"#444"})})}):null};function $(){return($=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function G(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var K=a.createElement("path",{d:"M7.314 5.9l3.535-3.536A1 1 0 1 0 9.435.95L5.899 4.485 2.364.95A1 1 0 1 0 .95 2.364l3.535 3.535L.95 9.435a1 1 0 1 0 1.414 1.414l3.535-3.535 3.536 3.535a1 1 0 1 0 1.414-1.414L7.314 5.899z"});function Q(e,t){var n=e.title,r=e.titleId,i=G(e,["title","titleId"]);return a.createElement("svg",$({viewBox:"-6 -6 24 24",width:24,height:24,preserveAspectRatio:"xMinYMin",className:"jam jam-close",ref:t,"aria-labelledby":r},i),n?a.createElement("title",{id:r},n):null,K)}var U=a.forwardRef(Q);n.p;function Z(){return(Z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ee(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var te=a.createElement("path",{d:"M13.82 9.523a.976.976 0 0 0-.324-1.363L3.574 2.128a1.031 1.031 0 0 0-.535-.149c-.56 0-1.013.443-1.013.99V15.03c0 .185.053.366.153.523.296.464.92.606 1.395.317l9.922-6.031c.131-.08.243-.189.325-.317zm.746 1.997l-9.921 6.031c-1.425.867-3.3.44-4.186-.951A2.918 2.918 0 0 1 0 15.03V2.97C0 1.329 1.36 0 3.04 0c.567 0 1.123.155 1.605.448l9.921 6.032c1.425.866 1.862 2.696.975 4.088-.246.386-.58.712-.975.952z"});function ne(e,t){var n=e.title,r=e.titleId,i=ee(e,["title","titleId"]);return a.createElement("svg",Z({viewBox:"-4 -3 24 24",width:24,height:24,preserveAspectRatio:"xMinYMin",className:"jam jam-play",ref:t,"aria-labelledby":r},i),n?a.createElement("title",{id:r},n):null,te)}var re=a.forwardRef(ne);n.p;function ae(){return(ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ie(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ce=a.createElement("path",{d:"M2 0h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zm0 2v14h2V2H2zm10-2h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zm0 2v14h2V2h-2z"});function oe(e,t){var n=e.title,r=e.titleId,i=ie(e,["title","titleId"]);return a.createElement("svg",ae({viewBox:"-4 -3 24 24",width:24,height:24,preserveAspectRatio:"xMinYMin",className:"jam jam-pause",ref:t,"aria-labelledby":r},i),n?a.createElement("title",{id:r},n):null,ce)}var le=a.forwardRef(oe),se=(n.p,{control:{position:"absolute",top:0,right:0,bottom:0,left:0,margin:"auto",height:96,width:96,pointerEvents:"none","& > svg":{filter:"drop-shadow(0 2px 8px rgba(0, 0, 0, 0.25))"}}}),he=function(e){var t=e.image,n=e.preview,i=a.useRef(null),c=a.useState(!1),s=Object(o.a)(c,2),h=s[0],u=s[1],f=a.useMemo((function(){return h?le:re}),[h]);a.useEffect((function(){i.current&&i.current.addEventListener("ended",(function(){u(!1)}))}),[i]);var p=a.useCallback((function(){i&&i.current&&(h?(i.current.pause(),u(!1)):(i.current.play(),u(!0)))}),[h,i]);return Object(r.jsx)(l.b,{disabled:!n,onClick:p,variant:"clear",width:256,height:256,mb:[24,0],children:Object(r.jsxs)(_.b.div,{style:{position:"relative"},whileTap:{scale:.925},children:[!!n&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("audio",{ref:i,controls:!1,src:n}),Object(r.jsx)(l.a,{sx:se.control,children:Object(r.jsx)(f,{height:96,width:96,fill:"#fff"})})]}),Object(r.jsx)(l.f,{sx:{objectFit:"cover",borderRadius:"50%"},width:256,height:256,src:t})]})})},ue=function(e){var t=e.result,n=e.onClose;return Object(r.jsxs)(l.c,{p:4,sx:{borderRadius:24,boxShadow:"large",position:"relative",border:"1px solid #e1e1e1",zIndex:2,minHeight:320},mx:[3,2],bg:"#fff",children:[Object(r.jsx)(l.b,{onClick:n,variant:"clear",sx:{position:"absolute",top:3,right:3},title:"Close",children:Object(r.jsx)(U,{height:32,width:32,fill:"#444"})}),t&&Object(r.jsxs)(l.d,{flexDirection:["column","row"],alignItems:"center",children:[Object(r.jsx)(he,{image:t.cover,preview:t.preview}),Object(r.jsxs)(l.d,{flex:1,justifyContent:"space-around",flexDirection:"column",alignItems:"center",children:[Object(r.jsxs)(l.d,{flexDirection:"column",alignItems:"center",children:["artist"!==t.type&&Object(r.jsx)(l.e,{m:"initial",mb:3,lineHeight:1,textAlign:"center",fontSize:5,as:"h1",children:t.title||t.album}),Object(r.jsx)(l.e,{textAlign:"center",fontSize:t.title||t.album?3:5,as:t.title||t.album?"h2":"h1",color:"#333",mb:2,children:t.artist}),"track"===t.type&&Object(r.jsx)(l.e,{textAlign:"center",color:"#666",fontWeight:500,fontSize:2,as:"h3",children:t.album})]}),Object(r.jsx)(l.d,{mt:4,children:t.urls.map((function(e){return Object(r.jsx)(X,{link:e},e)}))})]})]})]})},fe=n(85),pe=n.n(fe),de=n(53),be=n.n(de),me=n(86),je=function(){var e=Object(me.a)(be.a.mark((function e(t){var n,r,a;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=s.stringify({url:t}),e.next=4,fetch("".concat("https://europe-west1-jsaari-open-source.cloudfunctions.net/musalink","?").concat(n));case 4:if(200===(r=e.sent).status){e.next=7;break}return e.abrupt("return",Promise.reject());case 7:return e.next=9,r.json();case 9:return a=e.sent,e.abrupt("return",Promise.resolve(a));case 13:return e.prev=13,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),ve=function(e){var t=e.color,n=void 0===t?"#aaa":t,a=e.size,i=void 0===a?24:a;return Object(r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"40px",height:"40px",viewBox:"0 0 50 50",enableBackground:"new 0 0 50 50",xmlSpace:"preserve",style:{height:i,width:i},children:Object(r.jsx)("path",{fill:n,d:"M43.935,25.145c0-10.318-8.364-18.683-18.683-18.683c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615c8.072,0,14.615,6.543,14.615,14.615H43.935z",children:Object(r.jsx)("animateTransform",{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 25 25",to:"360 25 25",dur:"0.6s",repeatCount:"indefinite"})})})},xe=function(e){return!!e.match(/(open\.spotify|deezer\.com)/)},ge=function(e,t){return"linear-gradient(348deg,rgb(".concat(e.join(","),") 0%,rgb(").concat(t.join(","),"))")},Oe=function(){return Object(r.jsx)(l.d,{sx:{position:"absolute",bottom:3,left:"50%",transform:"translateX(-50%)"},children:Object(r.jsx)(l.h,{fontSize:0,color:"#f1f1f1",sx:{textShadow:"0 2px 4px rgba(0,0,0,0.25)"},children:"2020 - Made by Jim Saari"})})},ye=function(){var e=a.useState(function(){var e=s.parse(window.location.search);return e.q&&"string"===typeof e.q?e.q:""}()),t=Object(o.a)(e,2),n=t[0],i=t[1],c=a.useState(null),u=Object(o.a)(c,2),f=u[0],p=u[1],d=a.useState(xe(n)),b=Object(o.a)(d,2),m=b[0],j=b[1],v=a.useState(!1),x=Object(o.a)(v,2),g=x[0],O=x[1],y=a.useState("#5d13d4"),w=Object(o.a)(y,2),z=w[0],E=w[1],M=a.useState(ge([240,240,240],[250,250,250])),S=Object(o.a)(M,2),k=S[0],I=S[1],C=a.useCallback((function(e){e.preventDefault(),O(!0),je(n).then(p).catch((function(){})).finally((function(){O(!1)}))}),[n]);a.useEffect((function(){j(xe(n));var e=s.stringify({q:n}),t="".concat(window.location.protocol,"//").concat(window.location.host).concat(window.location.pathname).concat(n?"?".concat(e):"");window.history.pushState({path:t},"",t)}),[n]),a.useEffect((function(){f&&(O(!1),window.document.title="".concat(f.artist).concat("artist"!==f.type?" - ".concat(f.title||f.album):""),pe.a.from(f.cover).getPalette().then((function(e){e.DarkVibrant&&E(e.DarkVibrant.getHex()),I(ge(e.Muted?e.Muted.getRgb():[226,109,92],e.LightVibrant?e.LightVibrant.getRgb():[84,46,113]))})))}),[f]),a.useEffect((function(){xe(n)&&(O(!0),je(n).then(p).catch((function(){})).finally((function(){O(!1)})))}),[]);var P=a.useCallback((function(){p(null)}),[]);return Object(r.jsxs)(l.d,{width:1,flexDirection:"column",alignItems:"center",py:[32,120,240],sx:{minHeight:"100vh"},children:[Object(r.jsx)(_.a,{initial:!1,children:Object(r.jsx)(_.b.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"absolute",height:"100%",width:"100%",top:0,left:0,background:k}},k)}),Object(r.jsx)("div",{style:{maxWidth:640,width:"100%",zIndex:9},children:Object(r.jsx)(_.a,{initial:!1,exitBeforeEnter:!0,children:f?Object(r.jsx)(_.b.div,{initial:{opacity:0,y:125},animate:{opacity:1,y:0},exit:{opacity:0},children:Object(r.jsx)(ue,{onClose:P,result:f})},"card"):Object(r.jsx)(_.b.div,{initial:{opacity:0,y:125},animate:{opacity:1,y:0},exit:{opacity:0},children:Object(r.jsxs)(l.d,{mt:[5,0],mx:[3,0],as:"form",height:["auto",56],onSubmit:C,flexDirection:["column","row"],children:[Object(r.jsx)(h,{value:n,onChange:i}),Object(r.jsx)(l.b,{disabled:!m||g,sx:{borderRadius:99,boxShadow:"small",display:"flex",alignItems:"center",justifyContent:"center",opacity:m?1:.875,textShadow:"0 0 2px rgba(0,0,0,0.25)"},bg:z,color:"#fff",py:[3,2],height:[48,"auto"],px:4,fontWeight:400,type:"submit",width:[1,128],m:"initial",mt:[2,0],children:g?Object(r.jsx)(ve,{color:"#fff"}):"Search"})]})},"form")})}),Object(r.jsx)(Oe,{})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var we=n(87),ze=n(90),Ee=n(5);function Me(){var e=Object(ze.a)(["\n      body {\n        min-height: 100vh;\n        margin: 0;\n      }\n\n      html,\n      input {\n        font-family: ",";\n      }\n\n\n      pre {\n        font-family: ",";\n      }\n    "]);return Me=function(){return e},e}var Se={breakpoints:["40em","52em","64em"],fontSizes:[12,14,16,20,24,32,48,64],colors:{primary:"#542E71",orange:"#E26D5C",blue:"#07c",lightgray:"#f6f6ff"},space:[0,4,8,16,32,64,128,256],fonts:{heading:"Roboto, system-ui, sans-serif",sans:"Roboto, system-ui, sans-serif",mono:"Menlo, monospace"},shadows:{small:"0 8px 12px -8px rgba(0, 0, 0, 0.2)",large:"0 18px 16px -15px rgba(0,0,0,0.3), 0 10px 10px -20px rgba(0,0,0,0.8)"},buttons:{clear:{bg:"transparent",m:0,p:0,outline:0,border:0}}},ke=function(){return Object(r.jsx)(Ee.a,{styles:Object(Ee.c)(Me(),Se.fonts.sans,Se.fonts.mono)})},Ie=function(){return Object(r.jsx)(we.a,{theme:Se,children:Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(ye,{}),Object(r.jsx)(ke,{})]})})};c.a.render(Object(r.jsx)(Ie,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},84:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.determineService=void 0,t.determineService=function(e){return e.match(/open\.spotify/)?"spotify":e.match(/deezer\.com/)?"deezer":null}}},[[234,1,2]]]);
//# sourceMappingURL=main.32ae40be.chunk.js.map